= provide(:title, @workshop.title)
= provide(:googleshim, true)
#workshop_show

  %section.title_section.section
    .container
      %h1= @workshop.title_html
      %p
        - unless current_user.blank?
          - if @workshop.started? && @workshop.user == current_user
            = link_to "Resume", edit_workshop_path(@workshop)
          - elsif @workshop.pending? && @workshop.user == current_user
            = link_to 'Delete', @workshop, :method => :delete, :data => { :confirm => 'Are you sure you want to delete this workshop? Deleting cannot be undone.'}
          - elsif @workshop.accepted? && @workshop.user == current_user or current_user.admin?
            %p
              = link_to "Cancel", @workshop, :method => :cancel, :data => { :confirm => "Are you sure you want to cancel this workshop? It will be closed for sign-up and moved under My Canceled Workshops. You will still be able to edit and resubmit it."}
              |
              = link_to "Edit", edit_workshop_path(@workshop)

  %section#desc_section.section
    .container
      .row-fluid
        .span2
          - if @workshop.accepted?
            - if current_user.age < @workshop.age_min
              = link_to "Sign up!", new_workshop_work_signup_path(@workshop), :class => "btn btn-block btn-primary disabled"
              %p
                Sorry, it looks like you're younger than the minimum age for this workshop.
              %br/
              %p
                To be notified next time she's teaching, #{link_to "pre-register with #{@workshop.host_firstname}", workshops_path}.
            - elsif current_user.age > @workshop.age_max
              = link_to "Sign up!", new_workshop_work_signup_path(@workshop), :class => "btn btn-block disabled"
              %p
                Sorry, it looks like you're older than the maximum age for this workshop.
              %br/
              %p
                To be notified next time she's teaching, #{link_to "pre-register with #{@workshop.host_firstname}", workshops_path}.
              %p
                Wait! I'm a parent using my account to #{link_to "sign up my daughter", new_workshop_work_signup_path(@workshop), :class => "btn btn-small btn-success"}
            - else
              = link_to "Sign up!", new_workshop_work_signup_path(@workshop), :class => "btn btn-block btn-primary"
        .span10
          %dl.dl-horizontal
            %dt Description
            %dd= simple_format(@workshop.description)

            %dt When
            %dd #{@workshop.begins_at.strftime('%A, %B %d')} from #{@workshop.begins_at_time.strftime('%I:%M%P')} to #{@workshop.ends_at_time.strftime('%I:%M%P')}

            %dt Where
            %dd #{@workshop.location_private ? @workshop.location_nbrhood + ' neighborhood' : @workshop.location_address} in #{@workshop.location_city}, #{@workshop.location_state}

            %dt Cost
            %dd #{number_to_currency(@workshop.price*1.2)}

            %dt Ages
            %dd #{@workshop.age_min} - #{@workshop.age_max}

  %section#tags_section.section
    .container
      .row-fluid
        .span4.well
          %h3 Skills
          %ul.nav.nav-stacked
            -  @workshop.skill_list.each do |skill|
              %li
                %a #{skill}
        .span4.well
          %h3 Tools
          %ul.nav.nav-stacked
            -  @workshop.tool_list.each do |tool|
              %li
                %a #{tool}
        .span4.well
          %h3 Prerequisites
          %ul.nav.nav-stacked
            -  @workshop.requirement_list.each do |requirement|
              %li
                %a #{requirement}

  %section#album_section.section.alt
    .container
      .row-fluild
        #current_album
          #album_photos.transitions-enabled.clearfix
            = render 'albums/album_photos', limit: 5, desc: false, edit: false, controls: false

  %section#host_section.section
    .container
      .row-fluid
        .span2
          #avatar= avatar_for(@workshop.user, tag: 'large')
        .span10
          %dl.dl-horizontal
            %dt Bio
            %dd= @workshop.bio

            %dt Site
            %dd= @workshop.website

            %dt Web Shop
            %dd= @workshop.webshop

            %dt Facebook Page
            %dd= @workshop.facebook

            %dt Twitter
            %dd= @workshop.twitter

  %section#details_section.section.alt
    .map-top-shadow
    #map
    .map-bottom-shadow

  %section#admin_section.section
    .container
      .row-fluid
        - if current_user.admin? && @workshop.pending?
          %hr
          %h3 Admin Controls
          = form_for(@workshop) do |f|
            = f.submit "Reject Workshop", :name => "reject_button", :class => "btn btn-large btn-danger"
            = f.submit "Approve Workshop", :name => "accept_button", :class => "btn btn-large btn-success"

        - if current_user.admin? && @workshop.accepted?
          %hr
          %h3 Admin Controls
          = form_for(@workshop) do |f|
            = f.submit "Revoke Workshop", :name => "revoke_button", :class => "btn btn-large btn-danger"








